(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,a){e.exports=a(222)},220:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(53),c=a.n(l),o=a(67),i=a(9),u=a(81),s=a(160),m=r.a.createContext({}),d=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),d=Object(i.a)(o,2),p=d[0],f=d[1],E=Object(n.useState)(null),g=Object(i.a)(E,2),b=g[0],h=g[1],v=Object(n.useState)([]),x=Object(i.a)(v,2),O=x[0],y=x[1],j=Object(n.useState)([]),C=Object(i.a)(j,2),w=C[0],S=C[1],k=Object(n.useState)([]),U=Object(i.a)(k,2),I=U[0],N=U[1],T=Object(n.useState)({}),M=Object(i.a)(T,2),R=M[0],P=M[1],A=Object(n.useState)(""),L=Object(i.a)(A,2),V=L[0],W=L[1],z=Object(n.useRef)(),B=Object(n.useState)(""),_=Object(i.a)(B,2),G=_[0],D=_[1];function F(e,t){var a=Object(u.a)(R,function(a){a[t]=e});P(a)}return Object(n.useEffect)(function(){W("")},[R]),Object(n.useEffect)(function(){var e=O.filter(function(e){return!0===e.isOnline});S(e);var t=O.filter(function(e){return!1===e.isOnline});N(t)},[O]),Object(n.useEffect)(function(){var e=localStorage.getItem("isLoggedIn");e&&(c(e),f(!0))},[]),r.a.createElement(m.Provider,{value:{connected:p,username:l,message:V,newMessageForUser:G,messages:R,yourId:z.current?z.current.id:"",allUsers:O,currentChat:b,onlineUsers:w,offlineUsers:I,connect:function(e){e&&c(e),console.log("connecting"),f(!0),z.current=s.a.connect("http://localhost:5000"),z.current.emit("join server",l),localStorage.setItem("isLoggedIn",l),z.current.on("connect",function(){console.log("socket connected")}),z.current.on("disconnect",function(){console.log("socket disconnect")}),z.current.on("connect_error",function(e){console.log("socket connect_error",e)}),z.current.on("new user",function(e){y(e)}),z.current.on("new message",function(e){var t=e.messageContent,a=e.userSender,n=e.userReciver,r=e.createdAt;l==n&&D(a),P(function(e){return Object(u.a)(e,function(e){e[a]?e[a].push({messageContent:t,userSender:a,createdAt:r}):e[a]=[{messageContent:t,userSender:a,createdAt:r}]})})})},logOut:function(){c(""),localStorage.removeItem("isLoggedIn"),f(!1),window.location.reload(!1),z.current.emit("disconnect")},handleMessageChange:function(e){W(e.target.value)},sendMessage:function(){if(0!=V.length){var e={messageContent:V,userReciver:b,userSender:l,createdAt:new Date};z.current.emit("send message",e),e.createdAt=e.createdAt.toISOString();var t=Object(u.a)(R,function(t){t[b].push(e)});P(t)}},joinRoom:function(e){if(!R[e]){var t=Object(u.a)(R,function(t){t[e]=[]});P(t),z.current.emit("join room",e,function(t){return F(t,e)})}h(e)},onBadgeChange:function(){D("")}}},e.children)},p=m,f=a(300),E=a(304),g=a(296),b=a(305),h=a(295),v=a(301),x=a(128),O=a.n(x),y=function(e,t){return"USER_INPUT"===t.type?{value:t.val,isValid:t.val.trim().length>0}:"INPUT_BLUR"===t.type?{value:e.value,isValid:e.value.trim().length>0}:{value:"",isValid:!1}},j=function(e,t){return"USER_INPUT"===t.type?{value:t.val,isValid:t.val.trim().length>=6}:"INPUT_BLUR"===t.type?{value:e.value,isValid:e.value.trim().length>=6}:{value:"",isValid:!1}},C=function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useContext)(m),u=Object(n.useState)(!0),s=Object(i.a)(u,2),d=s[0],p=s[1],x=Object(n.useState)(!1),C=Object(i.a)(x,2),w=C[0],S=C[1],k=Object(n.useReducer)(y,{value:"",isValid:null}),U=Object(i.a)(k,2),I=U[0],N=U[1],T=Object(n.useReducer)(j,{value:"",isValid:null}),M=Object(i.a)(T,2),R=M[0],P=M[1],A=Object(n.useRef)(),L=Object(n.useRef)(),V=I.isValid,W=R.isValid;Object(n.useEffect)(function(){var e=setTimeout(function(){console.log("Checking form validity!"),S(V&&W)},500);return function(){console.log("CLEANUP"),clearTimeout(e)}},[V,W]);return r.a.createElement(f.a,{container:!0,className:"Login",style:{marginTop:"80px"}},r.a.createElement(E.a,{style:{padding:20,paddinTop:0,width:280,margin:"20px auto"},elevation:10},r.a.createElement(f.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(g.a,{value:l,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){c(t)},"aria-label":"disabled tabs example"},r.a.createElement(b.a,{label:"Log In",onClick:function(){return p(!0)}}),r.a.createElement(b.a,{label:"Sign Up",onClick:function(){return p(!1)}}))),r.a.createElement(f.a,{marginTop:"40px"},r.a.createElement("form",{onSubmit:function(e){var t,a;e.preventDefault(),w&&(d?(a={userName:I.value,userPassword:R.value},O.a.post("http://localhost:5000/users/login",a)).then(function(e){e&&o.connect(e.data.user.userName)}):(t={userName:I.value,userPassword:R.value},O.a.post("http://localhost:5000/users/signup",t)).then(function(e){e&&o.connect(e.userName)}))}},r.a.createElement(h.a,{variant:"standard",ref:A,label:"Username",placeholder:"Enter username",value:I.value,onChange:function(e){N({type:"USER_INPUT",val:e.target.value})},fullWidth:!0,required:!0}),r.a.createElement(h.a,{variant:"standard",ref:L,label:"Password",placeholder:"Enter password",type:"password",value:R.value,onChange:function(e){P({type:"USER_INPUT",val:e.target.value})},fullWidth:!0,required:!0}),r.a.createElement("div",{style:{marginTop:"3rem"}},d&&r.a.createElement(v.a,{type:"submit",color:"primary",variant:" contained",fullWidth:!0},"Log in"),d&&r.a.createElement(v.a,{onClick:function(){p(!1),c(1)},color:"primary",variant:" contained",fullWidth:!0},"Create New account")),!d&&r.a.createElement(v.a,{type:"submit",color:"primary",variant:" contained",fullWidth:!0},"Sign up")))))},w=(a(220),a(308)),S=a(288),k=a(302),U=a(309),I=a(307),N=a(287),T=a(289),M=a(285),R=a(311),P=a(286),A=a(290),L=a(291),V=a(292),W=a(299),z=a(306),B=a(310),_=a(130),G=a.n(_),D=a(153),F=a.n(D);function Y(e){var t,a=Object(n.useContext)(p);return t=a.currentChat&&a.messages[a.currentChat]?r.a.createElement(I.a,null,a.messages[a.currentChat].map(function(e,t){var a=G()(e.createdAt).format("hh:mm"),n=G()(e.createdAt).format("MMM Do YY");return r.a.createElement(W.a,{key:t},r.a.createElement(M.a,{primary:e.userSender,secondary:e.messageContent}),r.a.createElement(M.a,{secondary:a+n}))})):r.a.createElement(I.a,null),r.a.createElement(w.a,{id:"box",p:3},r.a.createElement(U.a,null,a.currentChat||"no chat"),r.a.createElement(P.a,null),a.currentChat&&r.a.createElement(f.a,{container:!0,spacing:4,alignItems:"center"},r.a.createElement(f.a,{xs:12,item:!0},t," "),r.a.createElement(f.a,{xs:10,item:!0},r.a.createElement(z.a,{fullWidth:!0},r.a.createElement(h.a,{value:a.message,name:"message",label:"Type your Message...",onChange:a.handleMessageChange,variant:"outlined",onKeyPress:function(e){"Enter"===e.key&&a.sendMessage()}}))),r.a.createElement(f.a,{xs:2,item:!0},r.a.createElement(B.a,{onClick:a.sendMessage,"aria-label":"send",color:"primary"},r.a.createElement(F.a,null)))))}var J=a(298);function q(e){var t=Object(n.useContext)(p),a=Object(n.useState)(0),l=Object(i.a)(a,2),c=l[0],o=l[1];return Object(n.useEffect)(function(){t.newMessageForUser==e.userName&&(o(c+1),t.onBadgeChange())},[t.newMessageForUser]),r.a.createElement(N.a,{key:e.userName,sx:{pl:4},onClick:function(){t.joinRoom(e.userName),o(0)}},r.a.createElement(J.a,{color:"secondary",badgeContent:c},r.a.createElement(M.a,{primary:e.userName})))}function H(e){var t=Object(n.useContext)(p),a=Object(n.useState)(!0),l=Object(i.a)(a,2),c=l[0],o=l[1],u=Object(n.useState)(!0),s=Object(i.a)(u,2),m=s[0],d=s[1];function f(e){if(e.socketId!==t.yourId)return r.a.createElement(q,{userName:e.userName})}Object(n.useEffect)(function(){return t.connect(),function(){}},[]);return r.a.createElement(w.a,{sx:{display:"flex",height:"50%"}},r.a.createElement(S.a,null),r.a.createElement(k.a,{sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box"}},variant:"permanent",anchor:"left"},r.a.createElement(U.a,null),r.a.createElement(I.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},component:"nav"},r.a.createElement(N.a,{onClick:function(){o(!c)}},r.a.createElement(T.a,null,r.a.createElement(A.a,{style:{color:"green"}})),r.a.createElement(M.a,{primary:"Online Users"}),c?r.a.createElement(L.a,null):r.a.createElement(V.a,null)),r.a.createElement(R.a,{in:c,timeout:"auto",unmountOnExit:!0},r.a.createElement(I.a,{component:"div",disablePadding:!0},t.onlineUsers.map(f)))),r.a.createElement(P.a,null),r.a.createElement(I.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},component:"nav"},r.a.createElement(N.a,{onClick:function(){d(!m)}},r.a.createElement(T.a,null,r.a.createElement(A.a,{style:{color:"red"}})),r.a.createElement(M.a,{primary:"Offline Users"}),m?r.a.createElement(L.a,null):r.a.createElement(V.a,null)),r.a.createElement(R.a,{in:m,timeout:"auto",unmountOnExit:!0},r.a.createElement(I.a,{component:"div",disablePadding:!0},t.offlineUsers.map(f))))),r.a.createElement(E.a,{component:"main",sx:{flexGrow:1,p:3,margin:20},id:"paper",elevation:5},r.a.createElement(U.a,null),r.a.createElement(Y,null)))}var K=a(312),Q=a(104),X=a(162),Z=a(156),$=a.n(Z),ee=a(313),te=a(303),ae=a(294),ne=a(314),re=a(155),le=a.n(re),ce=["home","how to play","about"],oe=["Logout"],ie=function(){var e=n.useContext(p),t=n.useState(null),a=Object(i.a)(t,2),r=a[0],l=a[1],c=n.useState(null),u=Object(i.a)(c,2),s=u[0],m=u[1],d=function(){l(null)},f=function(){m(null)};return n.createElement(K.a,{position:"fixed",sx:{zIndex:function(e){return e.zIndex.drawer+1}}},n.createElement(ee.a,{maxWidth:"xl"},n.createElement(U.a,{disableGutters:!0},n.createElement(le.a,null),n.createElement(w.a,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}}},n.createElement(B.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},color:"inherit"},n.createElement($.a,null)),n.createElement(X.a,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(r),onClose:d,sx:{display:{xs:"block",md:"none"}}},ce.map(function(e){return n.createElement(ne.a,{key:e,onClick:d},n.createElement(Q.a,{textAlign:"center"},n.createElement(o.b,{to:"/".concat(e)},e)))}))),n.createElement(Q.a,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,display:{xs:"flex",md:"none"}}},"LOGO"),n.createElement(w.a,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}},ce.map(function(e){return n.createElement(v.a,{key:e,onClick:d,sx:{my:2,color:"white",display:"block"}},n.createElement(o.b,{style:{textDecoration:"none",color:"white"},to:"/".concat(e)},e))})),n.createElement(w.a,{sx:{flexGrow:0}},n.createElement(ae.a,{title:"Open settings"},n.createElement(B.a,{onClick:function(e){m(e.currentTarget)},sx:{p:0}},n.createElement(te.a,{sx:{bgcolor:e.connected?"lightBlue":"grey"},alt:e.username.toUpperCase(),src:"/"}))),n.createElement(X.a,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(s),onClose:f},n.createElement(ne.a,{key:oe[0],onClick:f},n.createElement(v.a,{disabled:e.connected?"":"disabled",textAlign:"center",onClick:function(){return e.logOut()}},oe[0])))))))},ue=a(14),se=a(293);function me(){return r.a.createElement(f.a,{container:!0,className:"Login",style:{marginTop:"80px"}},r.a.createElement(se.a,{style:{padding:20,paddinTop:0,height:"70vh",width:280,margin:"20px auto"},elevation:10},r.a.createElement(f.a,null,"Just try it on and learn from mistake god damnit")))}function de(){return r.a.createElement(f.a,{container:!0,className:"Login",style:{marginTop:"80px"}},r.a.createElement(se.a,{style:{padding:20,paddinTop:0,height:"70vh",width:280,margin:"20px auto"},elevation:10},r.a.createElement(f.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},"It's all about love baby! You can chat! you can play! (Not Yet!, but you know...)")))}var pe=function(){var e=Object(n.useContext)(p);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(f.a,{sx:{display:"flex"}},r.a.createElement(ie,null),r.a.createElement(ue.c,null,r.a.createElement(ue.a,{path:"/",element:e.connected?r.a.createElement(H,null):r.a.createElement(C,null)}),r.a.createElement(ue.a,{path:"/Home",element:e.connected?r.a.createElement(H,null):r.a.createElement(C,null)}),r.a.createElement(ue.a,{path:"/How%20to%20play",element:r.a.createElement(me,null)}),r.a.createElement(ue.a,{path:"/About",element:r.a.createElement(de,null)})))))};c.a.render(r.a.createElement(d,null,r.a.createElement(o.a,null,r.a.createElement(pe,null))),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.79be7760.chunk.js.map